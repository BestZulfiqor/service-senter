# Автоматизация обработки данных в сервисном центре

Полнофункциональная система автоматизации для сервисного центра с использованием C#, PostgreSQL, HTML, CSS и JavaScript.

## Возможности системы

### Управление клиентами
- Добавление, редактирование и удаление клиентов
- Просмотр истории обращений каждого клиента
- Хранение контактной информации (ФИО, телефон, email)

### Управление заявками на ремонт
- Создание заявок с полной информацией об устройстве
- Отслеживание статуса заявок (Новая, В работе, Завершена, Отменена)
- Назначение техников на заявки
- Оценочная и итоговая стоимость ремонта
- Автоматическая история изменений (WorkLog)

### Управление техниками
- Регистрация техников с указанием специализации
- Отслеживание количества назначенных заявок
- Активация/деактивация техников

### Дашборд и статистика
- Общее количество заявок
- Количество новых заявок
- Заявки в работе
- Завершенные заявки
- Общая выручка

### Автоматизация
- Автоматическое логирование всех изменений статусов
- Автообновление статистики каждые 30 секунд
- Проверка целостности данных через Entity Framework

## Технологический стек

### Backend
- **ASP.NET Core 8.0** - веб API
- **Entity Framework Core** - ORM для работы с БД
- **Npgsql** - провайдер PostgreSQL
- **Swagger** - документация API

### Frontend
- **HTML5** - структура страниц
- **CSS3** - современный дизайн с градиентами и анимациями
- **JavaScript (Vanilla)** - динамическое взаимодействие
- **Fetch API** - асинхронные запросы к backend

### База данных
- **PostgreSQL** - реляционная СУБД

## Установка и запуск

### Предварительные требования

1. **.NET 8.0 SDK** - [Скачать](https://dotnet.microsoft.com/download/dotnet/8.0)
2. **PostgreSQL 14+** - [Скачать](https://www.postgresql.org/download/)
3. **Git** (опционально)

### Шаг 1: Установка PostgreSQL

1. Установите PostgreSQL
2. Создайте базу данных:
```sql
CREATE DATABASE ServiceCenterDB;
```

### Шаг 2: Настройка подключения к БД

Откройте файл `appsettings.json` и измените строку подключения:

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Port=5432;Database=ServiceCenterDB;Username=postgres;Password=ваш_пароль"
  }
}
```

Замените `ваш_пароль` на пароль вашей PostgreSQL.

### Шаг 3: Установка зависимостей и создание миграции

Откройте терминал в папке проекта и выполните:

```bash
# Установка инструментов EF Core (если не установлены)
dotnet tool install --global dotnet-ef

# Создание миграции
dotnet ef migrations add InitialCreate

# Применение миграции к базе данных
dotnet ef database update
```

### Шаг 4: Запуск приложения

```bash
dotnet run
```

Приложение запустится на `http://localhost:5000` или `https://localhost:5001`

Откройте браузер и перейдите по адресу: `http://localhost:5000`

## Структура проекта

```
ServiceCenter/
├── Controllers/              # API контроллеры
│   ├── CustomersController.cs
│   ├── ServiceRequestsController.cs
│   ├── TechniciansController.cs
│   └── WorkLogsController.cs
├── Data/                     # Контекст базы данных
│   └── ServiceCenterDbContext.cs
├── Models/                   # Модели данных
│   ├── Customer.cs
│   ├── ServiceRequest.cs
│   ├── Technician.cs
│   └── WorkLog.cs
├── wwwroot/                  # Статические файлы (Frontend)
│   ├── index.html
│   ├── styles.css
│   └── app.js
├── Program.cs                # Точка входа приложения
├── appsettings.json          # Конфигурация
└── ServiceCenter.csproj      # Файл проекта
```

## API Endpoints

### Customers (Клиенты)
- `GET /api/customers` - Получить всех клиентов
- `GET /api/customers/{id}` - Получить клиента по ID
- `POST /api/customers` - Создать клиента
- `PUT /api/customers/{id}` - Обновить клиента
- `DELETE /api/customers/{id}` - Удалить клиента

### Service Requests (Заявки)
- `GET /api/servicerequests` - Получить все заявки
- `GET /api/servicerequests/{id}` - Получить заявку по ID
- `GET /api/servicerequests/statistics` - Получить статистику
- `POST /api/servicerequests` - Создать заявку
- `PUT /api/servicerequests/{id}` - Обновить заявку
- `DELETE /api/servicerequests/{id}` - Удалить заявку

### Technicians (Техники)
- `GET /api/technicians` - Получить всех техников
- `GET /api/technicians/{id}` - Получить техника по ID
- `POST /api/technicians` - Создать техника
- `PUT /api/technicians/{id}` - Обновить техника
- `DELETE /api/technicians/{id}` - Удалить техника

### Work Logs (Журнал работ)
- `GET /api/worklogs/service-request/{id}` - Получить логи по заявке
- `POST /api/worklogs` - Добавить запись в журнал

## Swagger UI

После запуска приложения Swagger UI доступен по адресу:
`http://localhost:5000/swagger`

Здесь можно протестировать все API endpoints.

## Особенности реализации

### Автоматическое логирование
При создании или изменении статуса заявки автоматически создаются записи в журнале работ (WorkLog).

### Каскадное удаление
При удалении клиента автоматически удаляются все его заявки и связанные логи.

### Валидация данных
- Обязательные поля проверяются на уровне модели
- Ограничения по длине строк
- Проверка типов данных

### Responsive дизайн
Интерфейс адаптируется под различные размеры экранов (десктоп, планшет, мобильный).

## Дальнейшее развитие

Возможные улучшения:
- Система аутентификации и авторизации
- Уведомления клиентов (SMS/Email)
- Отчеты и аналитика
- Интеграция с системами оплаты
- Мобильное приложение
- Печать актов приема-передачи
- Управление запчастями и складом

## Лицензия

MIT License

## Автор

Разработано для автоматизации работы сервисного центра.
